# 授权协议助手 (License Helper) 功能文档

## 功能概述

**授权协议助手 (License Helper)** 是一个专为内容创作者设计的强大工具。它旨在帮助服务器内的用户轻松地为其在论坛帖子中发布的作品（如美术、文章、代码等）附加清晰、标准化的内容授权协议。

通过自动化的交互式面板，创作者可以快速声明其作品的使用条款，保护自己的创作权益，同时也为其他社区成员提供了明确的使用指引。

## 核心特性

-   **✅ 全自动提醒**: 在管理员指定的论坛频道中，一旦有新帖子发布，机器人会自动向发帖人发送一个私有的、交互式的助手面板。
-   **🎨 高度可定制**: 支持标准的 **Creative Commons (CC) 协议** 模板，也允许用户创建和保存完全**自定义**的授权条款。
-   **⚙️ 用户个性化设置**: 每个用户都可以保存自己的默认协议，并配置机器人的行为，例如“自动发布协议”、“发布前二次确认”、“完全禁用机器人提醒”等。
-   **🤝 现代交互体验**: 所有交互均通过 Discord 最新的 UI 组件（视图、模态框、下拉菜单）实现，提供了流畅、直观的用户体验。
-   **📚 深度知识引导**: 在选择CC协议时，机器人不仅会提供通俗化的条款解释，还会补充关于协议效力、不可撤回性、作者优先权等重要背景知识，起到了很好的教育作用。
-   **🔒 权限与数据隔离**: 每个用户的配置都独立存储在自己的JSON文件中，且所有交互面板都经过严格的权限检查，确保只有本人可以操作。

## 使用指南 (指令列表)

所有指令都以 `/内容授权` 开头。

| 命令                               | 描述                                                               | 适用场景                     |
| :--------------------------------- | :----------------------------------------------------------------- | :--------------------------- |
| `/内容授权 打开面板`               | 在当前帖子中重新召唤授权助手的主面板。                             | 帖子所有者在自己的帖内使用   |
| `/内容授权 编辑授权`               | 打开一个私密面板，用于创建或永久编辑你的默认授权协议。             | 任何地方，私密回复           |
| `/内容授权 设置助手`               | 打开一个私密面板，用于配置机器人的行为（如自动发布、总开关等）。   | 任何地方，私密回复           |
| `/内容授权 我的协议`               | 以私密消息的方式，显示你当前保存的默认协议。                       | 任何地方，私密回复           |

## 管理员配置

要启用并配置此功能，管理员需要在主 `config.json` 文件中添加 `license_cog` 部分：

```json
{
    // ... 其他配置 ...
    "license_cog": {
        "monitored_channels": [
            123456789012345678, // 论坛频道ID 1
            987654321098765432  // 论坛频道ID 2
        ],
        "allow_commercial_use": true
    }
}
```

-   **`monitored_channels`**: 一个包含**论坛频道ID**的列表。机器人只会对在这些频道中创建的新帖子作出反应。
-   **`allow_commercial_use`**: 一个布尔值 (`true` 或 `false`)。
    -   设置为 `true` 时，用户可以选择包含商业用途的CC协议（如 CC BY, CC BY-SA）。
    -   设置为 `false` 时，机器人会自动过滤掉商业性协议，并对用户误选的商业协议执行“自动降级”处理，以符合服务器政策。

## 数据存储

用户的个人授权配置以JSON文件的形式存储在以下路径：
`data/licenses/{user_id}.json`

这确保了用户数据的独立性和可移植性。